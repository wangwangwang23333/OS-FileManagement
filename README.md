# 文件系统管理——说明文档

## 项目说明

### 项目简介

本项目为同济大学软件学院2021年春季学期操作系统课程项目的文件系统管理项目。

通过在内存中开辟了一个空间作为文件存储器，利用FAT表和多级目录结构实现了一个简单的文件系统。

### 项目功能

![使用截图.png](https://z3.ax1x.com/2021/06/18/R9wax1.png)





本项目实现了以下的功能：

- **界面展示详实**

  界面左侧展示了多级目录结构，上部则展示了当前所在路径，右侧是当前目录下的文件的展示。

- **文件的管理**

  本项目通过显示链接（FAT表）的方法对文件存储空间进行管理，而文件目录采用多级目录结构，每一项包括了文件名、物理地址、创建时间、修改时间等信息。

- **功能全面**

  系统提供了新建文件(夹)、删除文件(夹)、重命名、查看属性、格式化等多种功能

- **使用简易**

  用户可以通过双击打开文件，也可以右击打开；可以直接双击文件夹进入下一级目录，也可以通过左侧的多级目录直接跳转。

### 项目环境

- **开发环境**

  Python 3.8

- **运行方法**

  1. 直接运行：双击打开可执行文件/文件管理.exe

  2. 代码运行：通过Python运行代码/main.py


## 功能实现

### 文件管理

在对文件存储空间进行管理的过程中，本项目采用显示链接即FAT表(Fat类)的方式进行管理。FAT表中：-2表示该磁盘块尚未被使用，-1表示该块为该文件磁盘块的最后一块，其他值则指的是下一个磁盘块的位置。

而对于多个文件，本项目通过多级目录结构(CatalogNode类)对每一个文件(FCB类)进行管理，其结构和我们在数据结构课程中所学习过的多叉树结构相同。

在此基础上，本项目完成了以下接口函数：



| 函数            | 功能                   | 截图                                                         |
| --------------- | ---------------------- | ------------------------------------------------------------ |
| openFile()      | 打开选中的文件         | <img src='https://z3.ax1x.com/2021/06/15/2qwLDI.png' height=200></img> |
| deleteFile()    | 删除选中的文件         | <img src='https://z3.ax1x.com/2021/06/15/2q0iKs.jpg' height=200> |
| rename()        | 修改选中的文件名称     | <img src='https://z3.ax1x.com/2021/06/15/2q0JIK.jpg' height=130> |
| clickTreeItem() | 通过目录树进行跳转     | <img src='https://z3.ax1x.com/2021/06/15/2q0BqI.jpg' width=300> |
| createFile()    | 创建新文件             | <img src='https://z3.ax1x.com/2021/06/15/2q0qWF.png' height=140> |
| createFolder()  | 创建新文件夹           | <img src='https://z3.ax1x.com/2021/06/15/2qB6mR.png' height=140> |
| viewAttribute() | 查看文件属性           | <img src='https://z3.ax1x.com/2021/06/15/2qDFA0.png' width=300> |
| format()        | 格式化                 | <img src='https://z3.ax1x.com/2021/06/15/2qDBUP.png' height=150> |
| savaFile()      | 关闭时将文件保存至本地 | <img src='https://z3.ax1x.com/2021/06/15/2qD72F.png' height=150> |
| backEvent()     | 返回上一级目录         | <img src='https://z3.ax1x.com/2021/06/15/2qDObR.png' height=100> |

### 写文件

本项目还提供了editForm类用来编辑文件，当编辑完成后会询问是否需要保存。如果需要保存，则文件将会在FAT表中寻找空白空间，并写入磁盘块中。

<img src='https://z3.ax1x.com/2021/06/15/2qrJI0.png' width=500>

## 项目总结

### 项目亮点

- 实现了文件管理基本功能
- 界面美观，使用方便，不同类型文件和文件夹图标各异
- 提供了多种跳转路径方法
- 提供了包括Delete在内的删除快捷键等

### 项目改进方向

本项目目前仅仅提供了创建文件、删除文件和修改文件名等基本功能，在未来可以考虑提供复制和粘贴文件等高级功能。

同时，可以考虑通过其他策略对文件系统进行管理。